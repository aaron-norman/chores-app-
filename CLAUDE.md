# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Development Commands

```bash
# Install dependencies
pip install -r requirements.txt

# Run the development server
python app.py
```

The app runs on Flask's default port (http://127.0.0.1:5000) with debug mode enabled.

## Architecture Overview

This is a **client-side office chores management application** with a minimal Flask backend serving a single-page app.

### Backend
- `app.py` - Minimal Flask server that only serves the `index.html` template. No API endpoints; all data management is client-side.

### Frontend Architecture

All application logic is in vanilla JavaScript modules loaded in this order:

1. **storage.js** - localStorage abstraction layer
   - Manages all data persistence (team, chores, recurring, completions, state)
   - All data stored in `localStorage` with `chores_app_*` key prefix
   - Provides CRUD operations for each entity type
   - Handles export/import of JSON data

2. **team.js** - Team member management
   - CRUD for team members with color assignments
   - Populates assignee dropdowns throughout the app
   - Provides `escapeHtml()` utility used by other modules

3. **recurring.js** - Cron-based recurrence system
   - Converts preset patterns (daily, weekly, weekdays, etc.) to cron expressions
   - Parses cron expressions to calculate occurrence dates
   - `expandForWeek()` generates chore instances from recurring definitions
   - Uses external `cronstrue` library for human-readable descriptions

4. **chores.js** - Chore CRUD and completion tracking
   - Handles both one-time and recurring chores
   - Manages form state for add/edit operations
   - Tracks completions separately (chore_id + due_date as composite key)

5. **calendar.js** - Week view calendar
   - Displays time slots from 6 AM to 10 PM
   - Renders both one-time chores and expanded recurring instances
   - Color-codes by assigned team member

6. **app.js** - Main controller
   - Initializes all modules on DOMContentLoaded
   - Manages view switching (calendar, chores list, history)
   - Controls modal system and toast notifications
   - Handles data export/import

### Data Model

All entities use UUIDs generated by `Storage.generateId()`. Key relationships:
- Chores can be assigned to team members via `assigned_to` (member ID)
- Recurring chores store a `recurrence_rule` object with `cron`, `preset`, and `human_readable` fields
- Completions reference `chore_id` + `due_date` to track specific instances
- ... subject to change.